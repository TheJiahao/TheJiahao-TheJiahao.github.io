{{- $video_src := .Get "src" | default (.Get 0) -}}
{{- $video_file := (.Page.Resources.GetMatch (printf "%s" $video_src)) -}}
{{- $controls := .Get "controls" | default "true" -}}


<div class="video-wrapper">
    <video
        src="{{- $video_file.RelPermalink -}}"
        {{ if eq $controls "true" }}controls{{ end }}
        {{ with .Get "poster" }}poster="{{- . -}}"{{ end }}
        {{ with .Get "autoplay" }}autoplay{{ end }}
        {{ with .Get "loop" }}loop{{ end }}
        {{ with .Get "muted" }}muted{{ end }}
        {{ with .Get "disablepictureinpicture" }}
            disablepictureinpicture
        {{ end }}

    >
        <p>
            Your browser doesn't support HTML5 video. Here is a
            <a href="{{- $video_file.RelPermalink -}}">link to the video</a>
            instead.
        </p>
    </video>
</div>
